<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>collatz-m4m6 — Pair Predicate Decomposition Tool for Collatz-type Maps</title>
<style>
  :root { --accent: #2a6496; --accent-dark: #1a3a5c; --warn: #856404; --warn-bg: #fff3cd; --danger-bg: #f8d7da; --info-bg: #d1ecf1; --bg: #fafafa; --card-bg: #fff; }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Yu Gothic', 'Meiryo', sans-serif; line-height: 1.7; color: #222; background: var(--bg); }

  /* Language switcher + tab navigation */
  .lang-bar { background: var(--accent-dark); color: #fff; padding: 6px 20px; font-size: 0.85em; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
  .lang-bar .site-id { font-weight: 600; letter-spacing: 0.5px; }
  .lang-btn { background: none; border: 1px solid rgba(255,255,255,0.5); color: #fff; padding: 2px 10px; border-radius: 3px; cursor: pointer; margin-left: 4px; font-size: 0.85em; }
  .lang-btn.active { background: rgba(255,255,255,0.25); border-color: #fff; }

  /* Tab navigation */
  .nav-tabs { display: flex; gap: 2px; }
  .nav-tab { background: none; border: none; color: rgba(255,255,255,0.7); padding: 6px 14px; cursor: pointer; font-size: 0.85em; border-radius: 4px 4px 0 0; white-space: nowrap; }
  .nav-tab:hover { color: #fff; background: rgba(255,255,255,0.1); }
  .nav-tab.active { color: #fff; background: rgba(255,255,255,0.2); font-weight: 600; }

  /* Hamburger menu toggle */
  .menu-toggle { display: none; background: none; border: 1px solid rgba(255,255,255,0.5); color: #fff; padding: 2px 8px; border-radius: 3px; cursor: pointer; font-size: 1.1em; line-height: 1; }

  /* Page section switching */
  .page-section { display: none; }
  .page-section.active { display: block; }

  [data-lang] { display: none; }
  [data-lang].show { display: revert; }

  /* Layout */
  .page-wrap { display: block; min-height: calc(100vh - 36px); }

  /* Main content */
  .content-inner { max-width: 880px; margin: 0 auto; padding: 0 28px 40px; }

  /* Hero */
  .hero { background: linear-gradient(135deg, var(--accent-dark), var(--accent)); color: #fff; padding: 36px 28px; margin-bottom: 28px; }
  .hero h1 { font-size: 1.7em; margin-bottom: 6px; }
  .hero .subtitle { font-size: 1.0em; opacity: 0.9; }

  h2 { font-size: 1.3em; border-left: 4px solid var(--accent); padding-left: 12px; margin: 32px 0 14px 0; scroll-margin-top: 52px; }
  h3 { font-size: 1.05em; color: var(--accent); margin: 18px 0 8px 0; }

  p { margin-bottom: 12px; }
  ul, ol { margin: 0 0 12px 24px; }
  li { margin-bottom: 6px; }

  table { border-collapse: collapse; width: 100%; margin: 12px 0 20px 0; font-size: 0.9em; }
  th, td { border: 1px solid #ccc; padding: 7px 10px; text-align: left; }
  th { background: #e9ecef; font-weight: 600; }
  td.num { text-align: right; font-family: 'Consolas', monospace; }
  .record-th { background: var(--accent); color: #fff; }

  .card-row { display: flex; gap: 16px; margin: 16px 0; flex-wrap: wrap; }
  .card-row.vertical { flex-direction: column; }
  .card { flex: 1; min-width: 240px; background: var(--card-bg); border: 1px solid #dee2e6; border-radius: 8px; padding: 16px; }
  .card h4 { margin: 0 0 8px 0; color: var(--accent); }

  .screenshot { width: 100%; border-radius: 6px; border: 1px solid #ccc; margin: 12px 0; cursor: pointer; transition: box-shadow 0.2s; }
  .screenshot:hover { box-shadow: 0 2px 12px rgba(0,0,0,0.2); }

  .box { border-radius: 6px; padding: 14px 18px; margin: 14px 0; }
  .box-warn { background: var(--warn-bg); border: 1px solid #e0c36a; }
  .box-info { background: var(--info-bg); border: 1px solid #bee5eb; }
  .box-code { background: #f0f4f8; border: 1px solid #c8d6e5; font-family: 'Consolas', monospace; font-size: 0.9em; line-height: 2; }
  .box-label { font-weight: bold; margin-bottom: 6px; }

  .download-section { background: #1a3a5c; color: #fff; border-radius: 10px; padding: 24px 28px; margin: 20px 0; }
  .download-section h3 { color: #ffd966; margin-top: 0; }
  .download-section a { color: #8ecae6; }
  .download-section code { background: rgba(255,255,255,0.15); color: #fff; padding: 2px 6px; border-radius: 3px; font-size: 0.85em; word-break: break-all; }

  .doi-placeholder { background: #fff3cd; border: 2px dashed #e0c36a; border-radius: 8px; padding: 16px; margin: 16px 0; text-align: center; color: #856404; font-weight: 600; }

  footer { padding: 20px 28px; border-top: 1px solid #ccc; color: #888; font-size: 0.85em; text-align: center; }

  code { background: #e9ecef; padding: 1px 5px; border-radius: 3px; font-size: 0.9em; }

  /* Document cards */
  .doc-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 16px 0; }
  .doc-card { background: var(--card-bg); border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; text-decoration: none; color: inherit; transition: box-shadow 0.2s, border-color 0.2s; }
  .doc-card:hover { box-shadow: 0 2px 12px rgba(0,0,0,0.12); border-color: var(--accent); }
  .doc-card h4 { margin: 0 0 8px 0; color: var(--accent); font-size: 1.05em; }
  .doc-card p { margin: 0; font-size: 0.9em; color: #555; }

  /* Mobile */
  @media (max-width: 840px) {
    .hero h1 { font-size: 1.3em; }
    .content-inner { padding: 0 16px 40px; }
    .card-row { flex-direction: column; }
    .doc-cards { grid-template-columns: 1fr; }
    .nav-tabs { display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--accent-dark); flex-direction: column; padding: 4px 0; box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
    .nav-tabs.open { display: flex; }
    .nav-tab { text-align: left; padding: 10px 20px; border-radius: 0; }
    .nav-tab.active { background: rgba(255,255,255,0.15); }
    .menu-toggle { display: block; }
  }
</style>
</head>
<body>

<!-- ===== LANGUAGE BAR + TAB NAVIGATION ===== -->
<div class="lang-bar">
  <span class="site-id">collatz-m4m6</span>
  <nav class="nav-tabs" id="nav-tabs">
    <button class="nav-tab active" data-lang="en" data-page="home" onclick="setPage('home')">Home</button>
    <button class="nav-tab" data-lang="en" data-page="features" onclick="setPage('features')">Features</button>
    <button class="nav-tab" data-lang="en" data-page="technical" onclick="setPage('technical')">Technical</button>
    <button class="nav-tab" data-lang="en" data-page="about" onclick="setPage('about')">About</button>
    <button class="nav-tab active" data-lang="ja" data-page="home" onclick="setPage('home')">ホーム</button>
    <button class="nav-tab" data-lang="ja" data-page="features" onclick="setPage('features')">機能</button>
    <button class="nav-tab" data-lang="ja" data-page="technical" onclick="setPage('technical')">技術</button>
    <button class="nav-tab" data-lang="ja" data-page="about" onclick="setPage('about')">概要</button>
  </nav>
  <div style="display:flex;align-items:center;gap:8px;">
    <button class="menu-toggle" onclick="toggleMenu()">&#9776;</button>
    <button class="lang-btn active" onclick="setLang('en')" id="btn-en">EN</button>
    <button class="lang-btn" onclick="setLang('ja')" id="btn-ja">JA</button>
  </div>
</div>

<div class="page-wrap">

<!-- Hero (always visible) -->
<div class="hero">
  <h1 data-lang="en" class="show">Pair Predicate Decomposition Tool<br>for Collatz-type Maps \((xn+1)/2^d\)</h1>
  <h1 data-lang="ja">コラッツ型写像 \((xn+1)/2^d\) の<br>ペア述語分解ツール</h1>
  <p class="subtitle" data-lang="en" class="show">The description of n' is already encoded in n itself.</p>
  <p class="subtitle" data-lang="ja">n' の記述は n のエンコードの中にある</p>
</div>

<div class="content-inner">

<!-- ========== PAGE: HOME ========== -->
<div class="page-section active" id="page-home">

<!-- ===== DOWNLOAD ===== -->
<h2 id="download" data-lang="en" class="show">Download</h2>
<h2 id="download-ja" data-lang="ja">ダウンロード</h2>

<div class="download-section">
  <h3 data-lang="en" class="show">collatz-gui.exe v0.4.0</h3>
  <h3 data-lang="ja">collatz-gui.exe v0.4.0</h3>

  <p data-lang="en" class="show">Windows x86_64, 5.4 MB, standalone / crt-static — no runtime required<br>
  <a href="https://github.com/onigirito/collatz-m4m6/releases/download/v0.4.0/collatz-gui.exe">Download (direct)</a> | <a href="https://github.com/onigirito/collatz-m4m6/releases">Releases page</a></p>
  <p data-lang="ja">Windows x86_64, 5.4MB, 単体実行可 / crt-static — ランタイム不要<br>
  <a href="https://github.com/onigirito/collatz-m4m6/releases/download/v0.4.0/collatz-gui.exe">ダウンロード (直接)</a> | <a href="https://github.com/onigirito/collatz-m4m6/releases">Releases ページ</a></p>

  <p data-lang="en" class="show">SHA-256: <code>78c050d11120c2a23606879a609f38f37f8267db5b8c04727933e63bdb0e9900</code><br>
  Verify: <code>certutil -hashfile collatz-gui.exe SHA256</code></p>
  <p data-lang="ja">SHA-256: <code>78c050d11120c2a23606879a609f38f37f8267db5b8c04727933e63bdb0e9900</code><br>
  検証: <code>certutil -hashfile collatz-gui.exe SHA256</code></p>

  <p data-lang="en" class="show" style="font-size:0.88em;opacity:0.8;">Requirements: Windows 10/11, AVX2-capable CPU (Intel Haswell 2013+ / AMD Excavator 2015+), OpenGL 2.0. Output files are saved to <code>output/</code> in the same directory.</p>
  <p data-lang="ja" style="font-size:0.88em;opacity:0.8;">動作要件: Windows 10/11, AVX2対応CPU（Intel第4世代2013年〜 / AMD 2015年〜）, OpenGL 2.0。結果は同ディレクトリの <code>output/</code> に自動保存。</p>

  <p data-lang="en" class="show">Paper: <a href="paper/m4m6_xn.pdf">PDF</a> | <a href="paper/m4m6_xn.tex">LaTeX source</a> | <a href="https://doi.org/10.5281/zenodo.18627192">Zenodo</a> &emsp; <a href="docs/summary_en.html" style="color:#ffd966;font-size:1.1em;font-weight:bold;">&#x1F4D6; Faster to read this (Plain summary)</a></p>
  <p data-lang="ja">論文: <a href="paper/m4m6_xn.pdf">PDF</a> | <a href="paper/m4m6_xn.tex">LaTeX ソース</a> | <a href="https://doi.org/10.5281/zenodo.18627192">Zenodo</a> &emsp; <a href="summary_ja.html" style="color:#ffd966;font-size:1.1em;font-weight:bold;">&#x1F4D6; これ読んだほうがはやい（日本語要約）</a></p>
  <p data-lang="en" class="show" style="font-size:0.78em;opacity:0.6;margin-top:2pt;">When using AI-assisted review, include this note alongside the LaTeX file to prevent authority bias. The GPK composition rules are algebraic identities, not inductive generalizations — do not misread them as convergence arguments. Recommended reader: Claude Code with API (Opus 4.6).</p>
  <p data-lang="ja" style="font-size:0.78em;opacity:0.6;margin-top:2pt;">AIにレビューさせる際は、この注意書きをLaTeXファイルと一緒に渡すと権威バイアスによる誤読を防げます。GPK合成規則は代数的恒等式であり、帰納的一般化ではありません — 収束論証と混同しないでください。推奨リーダー: Claude Code with API (Opus 4.6)。</p>
  <p data-lang="en" class="show" style="font-size:0.88em;opacity:0.8;margin-top:4pt;">Japanese version / 日本語版 — in preparation</p>
  <p data-lang="ja" style="font-size:0.88em;opacity:0.8;margin-top:4pt;">日本語版 — 準備中</p>
</div>

<p data-lang="en" class="show" style="font-size:0.78em;opacity:0.6;margin-top:6pt;line-height:1.5;">
<b>Observed AI review tendencies</b> (regardless of validity, no model accurately reproduces the paper's content):<br>
(1) Outputs that divergence is possible at any scale — contrary to the paper.<br>
(2) Outputs that 1-cycle closure has no further implications — contrary to the paper.<br>
(3) Does not read &sect;&sect;6&ndash;9 and outputs loose paraphrases — contrary to the paper.
</p>
<p data-lang="ja" style="font-size:0.78em;opacity:0.6;margin-top:6pt;line-height:1.5;">
<b>AI査読で観察される傾向</b>（真偽は別として、論文の内容を正確に翻訳できるモデルは存在しません）：<br>
(1) 任意のスケールで発散は可能と出力する — 論文と異なる。<br>
(2) 1サイクルの閉鎖性にそれ以上の含意はないと出力する — 論文と異なる。<br>
(3) &sect;&sect;6&ndash;9を読まず意訳を出力する — 論文と異なる。
</p>

<p data-lang="en" class="show"><b>Pair Predicate Decomposition of Collatz-type Maps \((xn+1)/2^d\) and the Structural Closure of \(3n+1\)</b></p>
<p data-lang="ja"><b>コラッツ型写像 \((xn+1)/2^d\) のペア述語分解と \(3n+1\) の構造的閉鎖性</b></p>

<p data-lang="en" class="show">We decompose the binary representation of a natural number <i>n</i> into 2-bit pairs and introduce a system of 16 Boolean predicates. Within this framework, the additive structure of Collatz-type maps T(<i>n</i>) = (<i>xn</i>+1)/2<sup><i>d</i></sup> is decomposed and the carry behavior at each pair position is classified as Generate/Propagate/Kill (GPK). For <i>x</i>=3, the carry structure of 3<i>n</i>+1 can be read directly from the encoding of <i>n</i> itself (structural closure). We prove this closure fails for all <i>x</i> &ge; 5, and show that the resulting finite-state system renders divergence of 3<i>n</i>+1 trajectories structurally impossible.</p>
<p data-lang="ja">自然数 <i>n</i> の2進表現を2ビットペアに分解し、各ペア上に定義される16個のブール述語系を導入する。この枠組みでコラッツ型写像 T(<i>n</i>) = (<i>xn</i>+1)/2<sup><i>d</i></sup> の加算構造を分解し、各ペア位置でのキャリー挙動を Generate/Propagate/Kill (GPK) に分類する。<i>x</i>=3 の場合、3<i>n</i>+1 のキャリー構造は <i>n</i> 自身の符号化から直接読み取れる（構造的閉鎖性）。この閉鎖性が <i>x</i> &ge; 5 の全てで成立しないことを証明し、結果として得られる決定性有限状態系が 3<i>n</i>+1 軌道の発散を構造的に不可能にすることを示す。</p>

<div style="background:#d4edda;border:2px solid #28a745;border-radius:8px;padding:16px;margin:16px 0;text-align:center;font-weight:600;">
  <span data-lang="en" class="show">DOI: <a href="https://doi.org/10.5281/zenodo.18521822" style="color:#155724;">10.5281/zenodo.18521822</a></span>
  <span data-lang="ja">DOI: <a href="https://doi.org/10.5281/zenodo.18521822" style="color:#155724;">10.5281/zenodo.18521822</a></span>
</div>

<!-- ===== GPK NOTE ===== -->
<div class="box box-warn" data-lang="en" class="show">
<p class="box-label">&#9888; Note on GPK Statistics and Measurement Method</p>
<p>GPK statistics measure the carry structure of the <i>xn</i>+1 addition only. The division by 2<sup><i>d</i></sup> involves no addition and produces no GPK. For accurate statistics, use <b>full-path tracking</b> (uncheck the stopping-time checkbox). The stopping-time method truncates trajectories and introduces sampling bias.</p>
<p>Full-path GPK measurements from the paper (Table 8.1):</p>
<table style="max-width:600px;">
<tr><th>Map</th><th>G%</th><th>P%</th><th>K%</th><th>G/K</th><th>All converge?</th></tr>
<tr><td>3n+1</td><td><b>38.52</b></td><td><b>29.89</b></td><td><b>31.59</b></td><td><b>1.22</b></td><td>Yes</td></tr>
<tr><td>5n+1</td><td>37.16</td><td>25.26</td><td>37.58</td><td>0.99</td><td>No</td></tr>
<tr><td>9n+1</td><td>37.32</td><td>25.16</td><td>37.52</td><td>1.00</td><td>No</td></tr>
</table>
<p style="font-size:0.88em;color:#666;">3n+1: 500M odd numbers, 3.50&times;10<sup>10</sup> steps. 5n+1: 35M odd, 1000 steps each. 9n+1: 35M odd, 500 steps each.</p>
</div>

<div class="box box-warn" data-lang="ja">
<p class="box-label">&#9888; GPK統計と測定方法について</p>
<p>GPK統計は <i>xn</i>+1 の加算のキャリー構造のみを測定します。2<sup><i>d</i></sup> での除算は加算を含まず、GPKを生成しません。正確な統計には<b>全経路追跡</b>（停止時間判定のチェックを外す）を使用してください。停止時間法は軌道を途中で切断し、サンプリングバイアスが生じます。</p>
<p>論文（Table 8.1）の全経路GPK実測データ：</p>
<table style="max-width:600px;">
<tr><th>写像</th><th>G%</th><th>P%</th><th>K%</th><th>G/K</th><th>全数収束?</th></tr>
<tr><td>3n+1</td><td><b>38.52</b></td><td><b>29.89</b></td><td><b>31.59</b></td><td><b>1.22</b></td><td>はい</td></tr>
<tr><td>5n+1</td><td>37.16</td><td>25.26</td><td>37.58</td><td>0.99</td><td>いいえ</td></tr>
<tr><td>9n+1</td><td>37.32</td><td>25.16</td><td>37.52</td><td>1.00</td><td>いいえ</td></tr>
</table>
<p style="font-size:0.88em;color:#666;">3n+1: 奇数5億個, 3.50&times;10<sup>10</sup>ステップ。5n+1: 奇数3500万個, 各1000ステップ。9n+1: 奇数3500万個, 各500ステップ。</p>
</div>

<!-- ===== DOCUMENTS ===== -->
<h2 id="docs" data-lang="en" class="show">Documents</h2>
<h2 id="docs-ja" data-lang="ja">ドキュメント</h2>

<div data-lang="en" class="show">
  <div class="doc-cards">
    <a class="doc-card" href="docs/tool_description_en.html">
      <h4>Tool Guide</h4>
      <p>Usage instructions, settings, and tab descriptions for the tool.</p>
    </a>
    <a class="doc-card" href="docs/TOOL_SPEC_en.html">
      <h4>Tool Specification</h4>
      <p>Module architecture, data flow, and GPK classification rules.</p>
    </a>
    <a class="doc-card" href="docs/performance_report_en.html">
      <h4>Performance Report</h4>
      <p>Benchmarks, optimization history, and FPGA considerations.</p>
    </a>
  </div>
</div>

<div data-lang="ja">
  <div class="doc-cards">
    <a class="doc-card" href="docs/tool_description.html">
      <h4>ツール説明</h4>
      <p>ツールの使い方・設定項目・タブの解説</p>
    </a>
    <a class="doc-card" href="docs/TOOL_SPEC.html">
      <h4>ツール仕様書</h4>
      <p>モジュール構成・データフロー・GPK分類規則</p>
    </a>
    <a class="doc-card" href="docs/performance_report.html">
      <h4>パフォーマンス分析</h4>
      <p>ベンチマーク・最適化履歴・FPGA検討</p>
    </a>
  </div>
</div>

</div><!-- end page-home -->

<!-- ========== PAGE: FEATURES ========== -->
<div class="page-section" id="page-features">

<!-- ===== FEATURES ===== -->
<h2 id="features" data-lang="en" class="show">Features</h2>
<h2 id="features-ja" data-lang="ja">機能</h2>

<div class="card-row vertical">
  <div class="card">
    <h4 data-lang="en" class="show">Single Analysis</h4>
    <h4 data-lang="ja">単発解析</h4>
    <p data-lang="en" class="show">Analyze a single odd number via pair predicate decomposition. One-step or full trajectory tracking with GPK string, d-value, exchange status, and carry chain length at each step.</p>
    <p data-lang="ja">1つの奇数に対して、ペア述語分解による詳細解析。1ステップまたは軌道追跡で、GPK列・d値・交換の有無・キャリー連鎖長を表示。</p>
    <img src="images/screenshot_single.png" alt="Single Analysis — trajectory tracking with GPK strings" class="screenshot" onclick="window.open(this.src)">
  </div>
  <div class="card">
    <h4 data-lang="en" class="show">Range Analysis (Sweep)</h4>
    <h4 data-lang="ja">区間解析（スイープ）</h4>
    <p data-lang="en" class="show">Verify all odd numbers in a range using parallel threads. The same exhaustive method used in world-record verification — on your own PC.</p>
    <p data-lang="ja">指定範囲の全奇数を並列検証。世界記録と同じ全数検証方式をあなたのPCで実行。</p>
    <img src="images/screenshot_sweep.png" alt="Range Analysis — GPK statistics and carry chain histogram" class="screenshot" onclick="window.open(this.src)">
  </div>
  <div class="card">
    <h4 data-lang="en" class="show">Log Analysis</h4>
    <h4 data-lang="ja">解析</h4>
    <p data-lang="en" class="show">Browse past run logs from the <code>output/</code> folder. Re-display GPK graphs and carry chain histograms.</p>
    <p data-lang="ja">過去の実行ログ（<code>output/</code>）を閲覧。GPKグラフやキャリー連鎖長ヒストグラムを再表示。</p>
    <img src="images/screenshot_log.png" alt="Log Analysis — browse and visualize past results" class="screenshot" onclick="window.open(this.src)">
  </div>
</div>

<!-- ===== SWEEP ===== -->
<h2 id="sweep" data-lang="en" class="show">Full-Range Verification (Sweep)</h2>
<h2 id="sweep-ja" data-lang="ja">区間全数検証（スイープ）</h2>

<div data-lang="en" class="show">
<p>You may have seen headlines like "<b>Collatz conjecture verified up to 2<sup>71</sup></b>." This does not mean a single large number was tested. It means <span style="color:var(--accent);font-weight:bold;">every odd number from 3 to 2<sup>71</sup> — trillions of numbers — was individually confirmed to converge</span>.</p>
<p>This tool's <b>Range Analysis</b> tab provides exactly this sweep capability. Enter a start and end value, click "Start", and the tool verifies all odd numbers in the range using parallel threads. Most Collatz tools only let you trace a single number — <b>tools with sweep capability are rare</b>.</p>
<p>Moreover, conventional verification tools output only 3 values: count, convergence yes/no, and maximum stopping time. This tool simultaneously accumulates <b>GPK statistics and carry chain length distributions</b>, providing insight into <i>why</i> convergence occurs — not just <i>that</i> it occurs.</p>
</div>

<div data-lang="ja">
<p>「<b>コラッツ予想は 2<sup>71</sup> まで検証済み</b>」という世界記録を目にしたことはありませんか？ これは1つの大きな数を調べたのではなく、<b style="color:var(--accent);">3 から 2<sup>71</sup> までの全奇数 — 数千兆個 — を1つ残らず収束確認した</b>記録です。</p>
<p>本ツールの<b>区間解析</b>タブは、まさにこのスイープ機能を提供します。開始値と終了値を入力し「検証開始」を押すだけ。<b>指定区間の全奇数をスイープ検証できるツールは限られています</b>。</p>
<p>さらに従来の検証ツールが出力するのは「検証数・収束の有無・最大停止時間」の3点のみ。本ツールは検証と同時に <b>GPK 統計・キャリー連鎖長分布</b>を蓄積し、収束の「なぜ」に迫る構造情報を提供します。</p>
</div>

<h3 data-lang="en" class="show">Verified Results</h3>
<h3 data-lang="ja">実測スイープ実績</h3>

<table>
  <tr><th class="record-th" data-lang="en" class="show">Map</th><th class="record-th" data-lang="ja">写像</th><th class="record-th" data-lang="en" class="show">Range</th><th class="record-th" data-lang="ja">検証範囲</th><th class="record-th" data-lang="en" class="show">Odd numbers</th><th class="record-th" data-lang="ja">奇数の個数</th><th class="record-th" data-lang="en" class="show">Time</th><th class="record-th" data-lang="ja">所要時間</th><th class="record-th" data-lang="en" class="show">Result</th><th class="record-th" data-lang="ja">結果</th></tr>
  <tr><td>3n+1</td><td>3 ~ 99,999,999,999 (&asymp;2<sup>37</sup>)</td><td data-lang="en" class="show">50 billion</td><td data-lang="ja">500億個</td><td>~2m 17s</td><td data-lang="en" class="show">All converge (max stopping time 345)</td><td data-lang="ja">全数収束（最大停止時間 345）</td></tr>
</table>
<p style="color:#666;font-size:0.88em;" data-lang="en" class="show">Measured on Intel Core i7-12650H (single desktop PC). Current world record: ~2<sup>71</sup> (Jan 2025, David Barina, GPU cluster).</p>
<p style="color:#666;font-size:0.88em;" data-lang="ja">Intel Core i7-12650H（デスクトップPC1台）での実測値。現在の世界記録は 2<sup>71</sup> 規模（2025年1月, David Barina, GPUクラスタ）。</p>

<!-- ===== GPK ===== -->
<h2 id="gpk" data-lang="en" class="show">GPK Classification &amp; Carry Chains</h2>
<h2 id="gpk-ja" data-lang="ja">GPK 分類とキャリー連鎖</h2>

<div data-lang="en" class="show">
<p>Pair predicate decomposition executes each step of the Collatz map as carry propagation in an adder circuit, not as multiplication. The carry behavior at each pair position is classified as GPK:</p>
<table>
<tr><th>Class</th><th>Meaning</th><th>Effect on carry</th></tr>
<tr><td><b>G</b> (Generate)</td><td>This pair generates a new carry</td><td>Output carry = 1 regardless of input</td></tr>
<tr><td><b>P</b> (Propagate)</td><td>This pair passes the input carry through</td><td>Output = input</td></tr>
<tr><td><b>K</b> (Kill)</td><td>This pair absorbs the carry</td><td>Output carry = 0 regardless of input</td></tr>
</table>
<p>For 3n+1, G &asymp; 38.5%, P &asymp; 29.9%, K &asymp; 31.6%. G exceeds K because structural closure (Theorem B) channels Kill into Propagate, elevating P above the 25% baseline seen in x &ge; 5. The G/K asymmetry is a signature of closure, not of divergence. For x &ge; 5, G &asymp; K and P &asymp; 25% — the closure breaks and non-trivial cycles appear.</p>
</div>

<div data-lang="ja">
<p>ペア述語分解では、コラッツ写像の1ステップを乗算ではなく加算器のキャリー伝播として実行します。各ペア位置でのキャリーの振る舞いがGPKとして分類されます：</p>
<table>
<tr><th>分類</th><th>意味</th><th>キャリーへの影響</th></tr>
<tr><td><b>G</b> (Generate)</td><td>キャリーを新たに生成</td><td>入力に関係なく出力 = 1</td></tr>
<tr><td><b>P</b> (Propagate)</td><td>入力キャリーをそのまま伝播</td><td>出力 = 入力</td></tr>
<tr><td><b>K</b> (Kill)</td><td>キャリーを消滅させる</td><td>入力に関係なく出力 = 0</td></tr>
</table>
<p>3n+1 では G &asymp; 38.5%, P &asymp; 29.9%, K &asymp; 31.6%。構造的閉包（定理B）によりKillがPropagateに転換され、x &ge; 5 での基準値25%を超えてPが上昇します。G/K非対称性は発散ではなく閉包の署名です。x &ge; 5 では G &asymp; K, P &asymp; 25% となり、閉包が崩れて非自明なサイクルが出現します。</p>
</div>

<h3 data-lang="en" class="show">GPK Statistics: 3n+1 Full-Path Verification (n &le; 10<sup>9</sup>)</h3>
<h3 data-lang="ja">GPK 統計: 3n+1 全経路検証 (n &le; 10<sup>9</sup>)</h3>

<div class="box box-code">
  G (Generate) = 120,268,437,088 &ensp;(<b>38.52%</b>)<br>
  P (Propagate) = &ensp;93,328,258,071 &ensp;(<b>29.89%</b>)<br>
  K (Kill) &emsp;&emsp;&ensp;= &ensp;98,636,560,382 &ensp;(<b>31.59%</b>)<br>
  <span data-lang="en" class="show">Total pairs = 312,233,255,541 &ensp;|&ensp; Total steps = 34,969,255,812</span>
  <span data-lang="ja">総ペア数 = 312,233,255,541 &ensp;|&ensp; 総ステップ数 = 34,969,255,812</span><br>
  <span data-lang="en" class="show">All 500 million odd numbers converge to 1 (max steps 370, n = 670,617,279)</span>
  <span data-lang="ja">5億個全数 n=1 に収束（最大ステップ数 370, n = 670,617,279）</span>
</div>

</div><!-- end page-features -->

<!-- ========== PAGE: TECHNICAL ========== -->
<div class="page-section" id="page-technical">

<!-- ===== PERFORMANCE ===== -->
<h2 id="performance" data-lang="en" class="show">Performance</h2>
<h2 id="performance-ja" data-lang="ja">パフォーマンス</h2>

<div data-lang="en" class="show">
<p>Three-tier computation architecture automatically selects the optimal path:</p>
<table>
<tr><th>Phase</th><th>Bit width</th><th>Method</th><th>Speed (3n+1, 50M odds)</th></tr>
<tr><td>Phase 1 (u128)</td><td>~128 bit</td><td>CPU native multiply</td><td class="num">~442M nums/s</td></tr>
<tr><td>Phase 1.5 (U256)</td><td>~256 bit</td><td>Stack-based 4&times;u64</td><td class="num">(fallback)</td></tr>
<tr><td>Phase 2 (Packed scan)</td><td>Arbitrary</td><td>Kogge-Stone pair decomposition</td><td class="num">~5.3M nums/s</td></tr>
</table>
<p>For sweeps, most numbers complete within u128 (Phase 1). GPK statistics add only <b>1.3&times; overhead</b> via packed scan (vs 20&times; overhead when collecting GPK through conventional arithmetic). When GPK collection is needed, the effective speed gap narrows to <b>5.5&times;</b>.</p>
</div>

<div data-lang="ja">
<p>3段階演算アーキテクチャが数値の大きさに応じて最適パスを自動選択：</p>
<table>
<tr><th>フェーズ</th><th>ビット幅</th><th>演算方式</th><th>速度（3n+1, 50M奇数）</th></tr>
<tr><td>Phase 1 (u128)</td><td>~128bit</td><td>CPUネイティブ乗算</td><td class="num">~442M nums/s</td></tr>
<tr><td>Phase 1.5 (U256)</td><td>~256bit</td><td>スタック割当 4&times;u64</td><td class="num">（フォールバック）</td></tr>
<tr><td>Phase 2 (パックドscan)</td><td>任意長</td><td>Kogge-Stone ペア述語分解</td><td class="num">~5.3M nums/s</td></tr>
</table>
<p>スイープではほぼ全数がu128（Phase 1）で完結。GPK統計のオーバーヘッドはパックドscanで<b>約1.3倍</b>（従来手法では約20倍）。GPK統計が必要な場面での実質速度差は<b>約5.5倍</b>に縮小。</p>
</div>

<!-- ===== SETTINGS ===== -->
<h2 id="settings" data-lang="en" class="show">Settings</h2>
<h2 id="settings-ja" data-lang="ja">設定項目</h2>

<div data-lang="en" class="show">
<ul>
<li><b>GPK Statistics checkbox</b> — Toggles GPK collection on/off. ON: accumulates G/P/K ratios and carry chain distributions. OFF: maximum sweep speed (~442M nums/s).</li>
<li><b>u128 Phase1 checkbox</b> — ON (default): uses CPU native arithmetic for numbers within 128 bits (~84&times; faster for 3n+1 sweeps). OFF: uses pair predicate decomposition for all steps.</li>
<li><b>Stopping time checkbox</b> — ON (default): stops tracking when n' &lt; n (standard stopping time). OFF: tracks until n = 1 (full path). For accurate GPK statistics, uncheck this option to collect data over the complete trajectory.</li>
<li><b>x =</b> — Map constant. Must satisfy x-1 = power of 2 (3, 5, 9, 17, ...).</li>
<li><b>max_steps</b> — Maximum iterations per number before giving up.</li>
</ul>
</div>

<div data-lang="ja">
<ul>
<li><b>GPK統計 チェックボックス</b> — GPK収集のON/OFF。ON: G/P/K比率・キャリー連鎖長分布を蓄積。OFF: 最大スイープ速度（~442M nums/s）。</li>
<li><b>u128 Phase1 チェックボックス</b> — ON（デフォルト）: 128bit以内の数をCPUネイティブ演算（3n+1スイープで約84倍高速）。OFF: 全ステップをペア述語分解で実行。</li>
<li><b>停止時間判定 チェックボックス</b> — ON（デフォルト）: n' &lt; n で停止（標準の停止時間法）。OFF: n = 1 まで追跡（全経路）。正確なGPK統計を取得したい場合はチェックを外してください。</li>
<li><b>x =</b> — 写像の定数。x-1 が2の冪である必要あり（3, 5, 9, 17, ...）。</li>
<li><b>max_steps</b> — 1つの数に対する最大ステップ数。</li>
</ul>
</div>

<div class="box box-warn">
<p class="box-label" data-lang="en" class="show">&#9888; Warning: max_steps for divergent maps (5n+1, 9n+1, ...)</p>
<p class="box-label" data-lang="ja">&#9888; 注意: 発散系列（5n+1, 9n+1 等）での max_steps</p>
<p data-lang="en" class="show">Maps other than 3n+1 may diverge. Setting max_steps too high can cause exponential memory growth. Recommended: 3n+1 = 1,000–10,000; 5n+1 = start at 1,000 or below; 9n+1+ = 100–500. You can stop at any time.</p>
<p data-lang="ja">3n+1以外の写像は発散する場合があります。max_stepsを大きくするとメモリが指数的に増大します。推奨: 3n+1 = 1,000〜10,000; 5n+1 = 1,000以下で開始; 9n+1以上 = 100〜500。停止ボタンでいつでも中断可能。</p>
<p data-lang="en" class="show"><b>GPK statistics measure the carry structure of the xn+1 addition only.</b> Each odd-to-odd step (Syracuse function) computes xn+1 and divides by 2<sup>d</sup>. GPK is accumulated from the addition phase; the division phase (bit removal + re-pairing) involves no addition and produces no GPK. The reported G/P/K percentages reflect carry Generate/Propagate/Kill across all pair positions of all odd-to-odd steps.</p>
<p data-lang="ja"><b>GPK統計は xn+1 の加算のキャリー構造のみを計測します。</b>奇数→奇数の各ステップ（Syracuse関数）は xn+1 を計算してから 2<sup>d</sup> で除算します。GPKは加算フェーズで累積され、除算フェーズ（ビット除去 + re-pairing）では加算が発生しないためGPKは生じません。表示されるG/P/K比率は、全ステップの全ペア位置におけるキャリーのGenerate/Propagate/Killの累積値です。</p>
</div>

<!-- ===== CSV ===== -->
<h2 id="csv" data-lang="en" class="show">CSV Output (Single Analysis)</h2>
<h2 id="csv-ja" data-lang="ja">CSV 出力（単発解析）</h2>

<div data-lang="en" class="show">
<p>Trajectory tracking in Single Analysis mode automatically saves results as CSV files containing all 16 predicates, GPK strings, d-values, exchange flags, and carry chain lengths at each step. Open in Excel or Python (pandas) for custom analysis — explore patterns that may reveal new structural laws.</p>
</div>
<div data-lang="ja">
<p>単発解析の軌道追跡では、結果がCSVファイルとして自動保存されます。各ステップの16述語・GPK列・d値・交換の有無・キャリー連鎖長を記録。ExcelやPython (pandas) で自由に解析でき、まだ知られていない構造的法則の探索に最適です。</p>
</div>

<!-- ===== THEORY ===== -->
<h2 id="theory" data-lang="en" class="show">Theoretical Background</h2>
<h2 id="theory-ja" data-lang="ja">理論的背景</h2>

<div data-lang="en" class="show">
<p>This tool implements the algorithm described in the accompanying paper. The key theoretical results are:</p>
<ul>
<li><b>Theorem A (Unified Algorithm):</b> The map \(T(n) = (xn+1)/2^d\) is computable by an \(O(k)\) bit-scan of m4/m6 pair projections. Multiplication \(xn\) is decomposed into reference pattern index shifts.</li>
<li><b>Theorem B (Structural Privilege of 3n+1):</b> For \(x=3\), the m4-stage GPK coincides with predicates m2(AND) and m7(XOR) of \(n\) itself — the carry landscape is readable directly from the pair type.</li>
<li><b>Theorem C (Limitation):</b> For \(x \geq 5\), this coincidence is impossible. The 16-predicate framework's per-pair independence cannot express the inter-pair correlations required.</li>
<li><b>Classification Theorem:</b> \(x=3\) is the <i>unique</i> parameter for which the carry structure closes within the predicate space.</li>
</ul>
</div>
<div data-lang="ja">
<p>本ツールは論文に記載のアルゴリズムを実装しています。主要な理論的結果:</p>
<ul>
<li><b>定理 A（統一アルゴリズム）:</b> 写像 \(T(n) = (xn+1)/2^d\) は m4/m6 ペア射影の \(O(k)\) ビット走査で計算可能。乗算 \(xn\) は参照パターンの添字シフトに分解。</li>
<li><b>定理 B（3n+1の構造的特権）:</b> \(x=3\) では m4段GPKが入力 \(n\) の述語 m2(AND), m7(XOR) に一致 — ペア型を読むだけでキャリー地形が判明。</li>
<li><b>定理 C（限界）:</b> \(x \geq 5\) ではこの一致は不可能。16述語の各ペア独立性により、ペア間相関は原理的に表現不可能。</li>
<li><b>分類定理:</b> キャリー構造が述語空間内で閉じるのは \(x=3\) のときに限る。</li>
</ul>
</div>

</div><!-- end page-technical -->

<!-- ========== PAGE: ABOUT ========== -->
<div class="page-section" id="page-about">

<!-- ===== SOURCE ===== -->
<h2 id="source" data-lang="en" class="show">Source Code</h2>
<h2 id="source-ja" data-lang="ja">ソースコード</h2>

<p data-lang="en" class="show">Rust (edition 2021). Source code available at <a href="https://github.com/onigirito/collatz-m4m6">github.com/onigirito/collatz-m4m6</a>.</p>
<p data-lang="ja">Rust (edition 2021)。ソースコード: <a href="https://github.com/onigirito/collatz-m4m6">github.com/onigirito/collatz-m4m6</a></p>

<!-- ===== LICENSE ===== -->
<h2 id="license" data-lang="en" class="show">License &amp; Disclaimer</h2>
<h2 id="license-ja" data-lang="ja">ライセンス・免責事項</h2>

<div data-lang="en" class="show">
<p>This software is released under the <b>MIT License</b>. You are free to use, modify, and redistribute it.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. The author assumes no liability for any damages arising from its use.</p>
<div class="box box-info">
<p class="box-label">Request for academic / commercial use</p>
<p>If you use this software, its algorithms, or the accompanying paper in academic publications, commercial products, or research that generates revenue or funding, I would appreciate it if you <a href="https://github.com/onigirito">contact me</a> beforehand. This is a courtesy request, not a license restriction.</p>
</div>
</div>

<div data-lang="ja">
<p>本ソフトウェアは <b>MIT ライセンス</b>で公開されています。自由に利用・改変・再配布できます。</p>
<p>本ソフトウェアは「現状のまま」提供され、いかなる保証もありません。使用により生じたいかなる損害についても著者は責任を負いません。</p>
<div class="box box-info">
<p class="box-label">学術・商用利用時のお願い</p>
<p>本ソフトウェア・アルゴリズム・論文を学術発表・商用製品・収益や研究資金を伴う研究に利用される場合は、事前に<a href="https://github.com/onigirito">ご連絡</a>いただけると幸いです。これはライセンス上の制約ではなく、お願いです。</p>
</div>
</div>

<!-- ===== SUPPORT ===== -->
<h2 id="support" data-lang="en" class="show">Support This Project</h2>
<h2 id="support-ja" data-lang="ja">プロジェクトを支援する</h2>

<div data-lang="en" class="show">
<p>This tool and paper are developed by one person in their free time. If you find this work useful, consider supporting its continued development:</p>
<ul>
<li>Star the <a href="https://github.com/onigirito/collatz-m4m6">GitHub repository</a></li>
<li>Report bugs or suggest features via <a href="https://github.com/onigirito/collatz-m4m6/issues">Issues</a></li>
<li>Donations are welcome — details on the <a href="https://github.com/onigirito">author's GitHub profile</a></li>
</ul>
</div>

<div data-lang="ja">
<p>本ツールと論文は個人が趣味の時間で開発しています。もしこの研究が役に立ったなら、継続開発を支援いただけると嬉しいです：</p>
<ul>
<li><a href="https://github.com/onigirito/collatz-m4m6">GitHub リポジトリ</a>にスターをつける</li>
<li>バグ報告・機能提案は <a href="https://github.com/onigirito/collatz-m4m6/issues">Issues</a> へ</li>
<li>寄付も募集中です — 詳しくは<a href="https://github.com/onigirito">作者の GitHub プロフィール</a>をご覧ください</li>
</ul>
</div>

</div><!-- end page-about -->

</div><!-- end content-inner -->

<footer>
  collatz-m4m6 &copy; 2026 onigirito &ensp;|&ensp;
  <a href="LICENSE" style="color:#888;">MIT License</a> &ensp;|&ensp;
  <span data-lang="en" class="show">Built with Rust &amp; eframe</span>
  <span data-lang="ja">Rust &amp; eframe で構築</span>
</footer>

</div><!-- end page-wrap -->

<!-- MathJax for formulas -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Language switching + Tab navigation -->
<script>
var currentPage = 'home';

function setPage(id) {
  currentPage = id;
  document.querySelectorAll('.page-section').forEach(function(el) {
    el.classList.toggle('active', el.id === 'page-' + id);
  });
  document.querySelectorAll('.nav-tab').forEach(function(btn) {
    btn.classList.toggle('active', btn.getAttribute('data-page') === id);
  });
  // Close mobile menu
  document.getElementById('nav-tabs').classList.remove('open');
  // Scroll to top
  window.scrollTo(0, 0);
}

function toggleMenu() {
  document.getElementById('nav-tabs').classList.toggle('open');
}

function setLang(lang) {
  document.querySelectorAll('[data-lang]').forEach(function(el) {
    el.classList.toggle('show', el.getAttribute('data-lang') === lang);
  });
  document.getElementById('btn-en').classList.toggle('active', lang === 'en');
  document.getElementById('btn-ja').classList.toggle('active', lang === 'ja');
  document.documentElement.lang = lang;
  localStorage.setItem('collatz-lang', lang);
  // Re-apply active tab for new language
  setPage(currentPage);
}

// Restore saved language or detect from browser
(function() {
  var saved = localStorage.getItem('collatz-lang');
  if (saved) { setLang(saved); return; }
  var browserLang = (navigator.language || '').toLowerCase();
  setLang(browserLang.startsWith('ja') ? 'ja' : 'en');
})();
</script>

</body>
</html>
